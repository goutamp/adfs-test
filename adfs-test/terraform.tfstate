{
  "version": 4,
  "terraform_version": "0.12.19",
  "serial": 20,
  "lineage": "6e2c955a-67e3-8a76-bf31-30ecdad10182",
  "outputs": {},
  "resources": [
    {
      "module": "module.aws-adfs",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "this",
      "provider": "module.aws-adfs.provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "958889302440",
            "arn": "arn:aws:iam::958889302440:user/goutam-test",
            "id": "2020-01-19 11:07:20.731806031 +0000 UTC",
            "user_id": "AIDA56QSBTGUIZNPABJUC"
          }
        }
      ]
    },
    {
      "module": "module.aws-adfs",
      "mode": "data",
      "type": "template_file",
      "name": "saml_policy",
      "provider": "provider.template",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "122b0fe590f9e4add47e145ddce985ebf0e9a0c8919cec8f9e814fc835c4c1a1",
            "rendered": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Federated\": [\n          \"arn:aws:iam::958889302440:saml-provider/idp\",\n          \"arn:aws:iam::958889302440:saml-provider/idp-test1\"\n        ]\n      },\n      \"Action\": \"sts:AssumeRoleWithSAML\",\n      \"Condition\": {\n        \"StringEquals\": {\n          \"SAML:aud\": \"https://signin.aws.amazon.com/saml\"\n        }\n      }\n    }\n  ]\n}\n\n",
            "template": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Federated\": [\n          \"arn:aws:iam::${account_id}:saml-provider/idp\",\n          \"arn:aws:iam::${account_id}:saml-provider/idp-test1\"\n        ]\n      },\n      \"Action\": \"sts:AssumeRoleWithSAML\",\n      \"Condition\": {\n        \"StringEquals\": {\n          \"SAML:aud\": \"https://signin.aws.amazon.com/saml\"\n        }\n      }\n    }\n  ]\n}\n\n",
            "vars": {
              "account_id": "958889302440",
              "region": "us-east-2"
            }
          }
        }
      ]
    },
    {
      "module": "module.aws-adfs",
      "mode": "data",
      "type": "template_file",
      "name": "support_policy",
      "provider": "provider.template",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "f620e7e8246ebaef7434279bffe34e643957a8d172ca354e751e28dbe7229407",
            "rendered": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"S3:*\",\n      \"Resource\": \"arn:aws:s3:::test123/*\",\n      \"Condition\": {}\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetBucketLocation\",\n        \"s3:ListAllMyBuckets\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:ListBucket\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::test123\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowGet\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::test12/*\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowPut\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::test/build-artifacts/*\",\n        \"arn:aws:s3:::test/eds-config/*\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowCreateDBInstanceOnly\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"rds:CreateDBInstance\"\n      ],\n      \"Resource\": [\n        \"arn:aws:rds:*:12345:db:test1*\",\n        \"arn:aws:rds:*:12345:og:default*\",\n        \"arn:aws:rds:*:12345:pg:default*\",\n        \"arn:aws:rds:*:12345:subgrp:default\"\n      ],\n      \"Condition\": {\n        \"StringEquals\": {\n          \"rds:DatabaseEngine\": \"mysql\",\n          \"rds:DatabaseClass\": \"db.t2.micro\"\n        }\n      }\n    }\n  ]\n}\n",
            "template": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"S3:*\",\n      \"Resource\": \"arn:aws:s3:::test123/*\",\n      \"Condition\": {}\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetBucketLocation\",\n        \"s3:ListAllMyBuckets\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:ListBucket\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::test123\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowGet\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::test12/*\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowPut\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::test/build-artifacts/*\",\n        \"arn:aws:s3:::test/eds-config/*\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowCreateDBInstanceOnly\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"rds:CreateDBInstance\"\n      ],\n      \"Resource\": [\n        \"arn:aws:rds:*:12345:db:test1*\",\n        \"arn:aws:rds:*:12345:og:default*\",\n        \"arn:aws:rds:*:12345:pg:default*\",\n        \"arn:aws:rds:*:12345:subgrp:default\"\n      ],\n      \"Condition\": {\n        \"StringEquals\": {\n          \"rds:DatabaseEngine\": \"mysql\",\n          \"rds:DatabaseClass\": \"db.t2.micro\"\n        }\n      }\n    }\n  ]\n}\n",
            "vars": {
              "account_id": "958889302440",
              "region": "us-east-2"
            }
          }
        }
      ]
    },
    {
      "module": "module.aws-adfs",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "support_role",
      "provider": "module.aws-adfs.provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::958889302440:role/ADFS-non-prod-ApplicationAccess",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Federated\":[\"arn:aws:iam::958889302440:saml-provider/idp-test1\",\"arn:aws:iam::958889302440:saml-provider/idp\"]},\"Action\":\"sts:AssumeRoleWithSAML\",\"Condition\":{\"StringEquals\":{\"SAML:aud\":\"https://signin.aws.amazon.com/saml\"}}}]}",
            "create_date": "2020-01-19T07:26:30Z",
            "description": "",
            "force_detach_policies": false,
            "id": "ADFS-non-prod-ApplicationAccess",
            "max_session_duration": 3600,
            "name": "ADFS-non-prod-ApplicationAccess",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {
              "Application": "bliss",
              "CostCode": "IT-ARGOS",
              "Environment": "argosfx",
              "Family": "temp",
              "Name": "argosfx-temp-bliss-application-role"
            },
            "unique_id": "AROA56QSBTGUMYQTASX76"
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.aws-adfs",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "support_policy",
      "provider": "module.aws-adfs.provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "ADFS-non-prod-ApplicationAccess:argosfx-temp-bliss-support-policy-20200119072630948500000001",
            "name": "argosfx-temp-bliss-support-policy-20200119072630948500000001",
            "name_prefix": "argosfx-temp-bliss-support-policy-",
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"S3:*\",\n      \"Resource\": \"arn:aws:s3:::test123/*\",\n      \"Condition\": {}\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetBucketLocation\",\n        \"s3:ListAllMyBuckets\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:ListBucket\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::test123\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowGet\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::test12/*\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowPut\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\"\n      ],\n      \"Resource\": [\n        \"arn:aws:s3:::test/build-artifacts/*\",\n        \"arn:aws:s3:::test/eds-config/*\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowCreateDBInstanceOnly\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"rds:CreateDBInstance\"\n      ],\n      \"Resource\": [\n        \"arn:aws:rds:*:12345:db:test1*\",\n        \"arn:aws:rds:*:12345:og:default*\",\n        \"arn:aws:rds:*:12345:pg:default*\",\n        \"arn:aws:rds:*:12345:subgrp:default\"\n      ],\n      \"Condition\": {\n        \"StringEquals\": {\n          \"rds:DatabaseEngine\": \"mysql\",\n          \"rds:DatabaseClass\": \"db.t2.micro\"\n        }\n      }\n    }\n  ]\n}\n",
            "role": "ADFS-non-prod-ApplicationAccess"
          },
          "private": "bnVsbA==",
          "dependencies": [
            "module.aws-adfs.aws_iam_role.support_role"
          ]
        }
      ]
    }
  ]
}
